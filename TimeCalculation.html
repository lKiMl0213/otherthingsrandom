<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <title>Divis√£o de Itens por Tempo</title>
    <style>
        :root {
            --bg: #f5f5f5;
            --fg: #222;
            --box-bg: #fff;
            --primary: #0077cc;
            --primary-hover: #005fa3;
            --border: #cccccc;
        }

        body.dark {
            --bg: #121212;
            --fg: #eaeaea;
            --box-bg: #1e1e1e;
            --primary: #3399ff;
            --primary-hover: #1976d2;
            --border: #3a3a3a;
        }

        * { box-sizing: border-box; }

        body {
            font-family: "Segoe UI", Tahoma, sans-serif;
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg);
            color: var(--fg);
            transition: background 0.3s, color 0.3s;
            padding: 20px;
        }

        .box {
            background: var(--box-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
            width: 100%;
            max-width: 520px;
            transition: background 0.3s;
        }

        h1 { 
            font-size: 20px; 
            margin: 0 0 12px; 
            text-align: center; 
        }

        label { 
            display: block; 
            margin-top: 10px; 
            font-size: 13px; 
        }

        input, select, button {
            font-family: inherit;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 6px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
            background: var(--box-bg);
            color: var(--fg);
            transition: background 0.3s, color 0.3s, border 0.3s;
        }

        .row { display: flex; gap: 10px; align-items: center; }
        .col { flex: 1; }

        button {
            margin-top: 12px;
            padding: 8px 10px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover { background: var(--primary-hover); }

        .topbar {
            position: absolute;
            top: 15px;
            right: 20px;
            display: flex;
            align-items: center; /* alinha verticalmente todos os itens */
            gap: 8px;
        }

        .topbar select {
            height: 36px;             /* igual ao bot√£o */
            padding: 0 8px;
            font-size: 14px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--box-bg);
            color: var(--fg);
            transition: background 0.3s, color 0.3s, border 0.3s;
        }

        .toggle-btn {
            padding: 6px 12px;
            font-size: 16px;
            border-radius: 8px;
            background: var(--primary);
            color: #fff;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            flex-shrink: 0; /* n√£o encolhe */
        }

        .toggle-btn:hover {
            background: var(--primary-hover);
            transform: scale(1.05);
        }

        .conta {
            border: 1px solid var(--border);
            padding: 12px;
            border-radius: 8px;
            margin-top: 12px;
            position: relative;
            background: rgba(0,0,0,0.02);
        }

        .conta .row { display: grid; grid-template-columns: 1fr; gap: 6px; }

        .remove-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: crimson;
            color: #fff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            padding: 2px 8px;
            font-size: 12px;
            transition: background 0.2s;
        }

        .remove-btn:hover { background: #b2001f; }

        .actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .actions button { flex: 1; }

        .resultado {
            margin-top: 18px;
            font-weight: 500;
            text-align: center;
        }

        @media (max-width: 740px) {
            .row, .conta .row { grid-template-columns: 1fr; }
            .topbar { right: 12px; top: 10px; }
        }

        .sidebar {
            height: 100vh;
            width: 18%;
            min-width: 220px;
            max-width: 300px;
            position: fixed;
            top: 0;
            left: 0;
            background-color: var(--box-bg);
            border-right: 1px solid var(--border);
            padding-top: 30px;
            box-shadow: 2px 0 8px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            transition: width 0.3s, background 0.3s, border 0.3s;
        }

        .sidebar h2 {
            color: var(--fg);
            text-align: center;
            font-size: 18px;
            margin-bottom: 20px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0 10px;
            margin: 0;
            flex: 1;
        }

        .sidebar ul li {
            margin: 8px 0;
        }

        .sidebar ul li a {
            color: var(--fg);
            text-decoration: none;
            padding: 10px 14px;
            display: block;
            border-radius: 8px;
            transition: background 0.3s, color 0.3s;
        }

        .sidebar ul li a:hover {
            background-color: var(--primary);
            color: #fff;
        }

        body.dark .sidebar {
            background-color: var(--box-bg);
            border-right: 1px solid var(--border);
        }

        body.dark .sidebar h2,
        body.dark .sidebar ul li a {
            color: var(--fg);
        }

        body.dark .sidebar ul li a:hover {
            background-color: var(--primary);
            color: #fff;
        }
    </style>
</head>
<body>
    <div class="topbar">
        <select id="seletor-idioma" style="padding:6px;">
            <option value="pt-BR">Portugu√™s (BR)</option>
            <option value="en-US">English</option>
            <option value="es-ES">Espa√±ol</option>
            <option value="fr-FR">Fran√ßais</option>
            <option value="de-DE">Deutsch</option>
            <option value="fi-FI">Suomi</option>
            <option value="pl-PL">Polski</option>
            <option value="tr-TR">T√ºrk√ße</option>
        </select>
        <button class="toggle-btn" onclick="toggleModo()">üåô/‚òÄÔ∏è</button>
    </div>
    
    <!-- menu lateral -->
    <div class="sidebar">
        <h2>Menu</h2>
        <ul>
            <li><a href="ItemDivision.html">Divis√£o de item entre contas</a></li>
            <li><a href="TimeEstimated.html">C√°lculo de tempo de coleta de item</a></li>
        </ul>
    </div>

    <div class="box">
        <h1 id="titulo">Divis√£o de Itens</h1>
        <label for="total" id="label-total">Quantidade total de itens:</label>
        <input type="number" id="total" placeholder="Insira o Valor!" min="0" />

        <div id="contas"></div>

        <div class="actions">
            <button id="btn-adicionar" onclick="adicionarConta()">+ Adicionar conta</button>
            <button id="btn-calcular" onclick="calcular()">Calcular</button>
        </div>

        <div class="resultado" id="resultado"></div>
    </div>

    <script>
        // Tradu√ß√µes
        const textos = {
            "pt-BR": {
                titulo: "Divis√£o de Itens",
                totalItens: "Quantidade total de itens:",
                placeholderTotal: "Insira o Valor!",
                adicionarConta: "+ Adicionar conta",
                calcular: "Calcular",
                tempoPorItem: "Tempo por item (Conta {letra} - seg) <small>[0 = desativado]</small>:",
                nenhumaConta: "Nenhuma conta ativa!",
                quantidadeZero: "Defina uma quantidade total de itens maior que zero.",
                tempoAprox: "‚è≥ Tempo aproximado para terminar"
            },
            "en-US": {
                titulo: "Item Distribution",
                totalItens: "Total number of items:",
                placeholderTotal: "Enter Value!",
                adicionarConta: "+ Add Account",
                calcular: "Calculate",
                tempoPorItem: "Time per item (Account {letra} - sec) <small>[0 = disabled]</small>:",
                nenhumaConta: "No active account!",
                quantidadeZero: "Enter a total number of items greater than zero.",
                tempoAprox: "‚è≥ Approximate time to finish"
            },
            "fi-FI": {
                titulo: "Esineiden jakaminen",
                totalItens: "Kohteiden kokonaism√§√§r√§:",
                placeholderTotal: "Sy√∂t√§ arvo!",
                adicionarConta: "+ Lis√§√§ tili",
                calcular: "Laske",
                tempoPorItem: "Aika per kohde (Tili {letra} - s) <small>[0 = pois k√§yt√∂st√§]</small>:",
                nenhumaConta: "Ei aktiivisia tilej√§!",
                quantidadeZero: "Anna kohteiden kokonaism√§√§r√§, joka on suurempi kuin nolla.",
                tempoAprox: "‚è≥ Arvioitu aika valmistumiseen"
            },
            "fr-FR": {
                titulo: "R√©partition des articles",
                totalItens: "Nombre total d'articles:",
                placeholderTotal: "Entrez la valeur!",
                adicionarConta: "+ Ajouter un compte",
                calcular: "Calculer",
                tempoPorItem: "Temps par article (Compte {letra} - s) <small>[0 = d√©sactiv√©]</small>:",
                nenhumaConta: "Aucun compte actif!",
                quantidadeZero: "Entrez un nombre total d'articles sup√©rieur √† z√©ro.",
                tempoAprox: "‚è≥ Temps approximatif pour terminer"
            },
            "de-DE": {
                titulo: "Artikelverteilung",
                totalItens: "Gesamtanzahl der Artikel:",
                placeholderTotal: "Wert eingeben!",
                adicionarConta: "+ Konto hinzuf√ºgen",
                calcular: "Berechnen",
                tempoPorItem: "Zeit pro Artikel (Konto {letra} - s) <small>[0 = deaktiviert]</small>:",
                nenhumaConta: "Keine aktiven Konten!",
                quantidadeZero: "Geben Sie eine Gesamtanzahl von Artikeln gr√∂√üer als null ein.",
                tempoAprox: "‚è≥ Ungef√§hre Fertigstellungszeit"
            },
            "pl-PL": {
                titulo: "Podzia≈Ç przedmiot√≥w",
                totalItens: "≈ÅƒÖczna liczba przedmiot√≥w:",
                placeholderTotal: "Wprowad≈∫ warto≈õƒá!",
                adicionarConta: "+ Dodaj konto",
                calcular: "Oblicz",
                tempoPorItem: "Czas na przedmiot (Konto {letra} - s) <small>[0 = wy≈ÇƒÖczone]</small>:",
                nenhumaConta: "Brak aktywnych kont!",
                quantidadeZero: "Wprowad≈∫ ≈ÇƒÖcznƒÖ liczbƒô przedmiot√≥w wiƒôkszƒÖ ni≈º zero.",
                tempoAprox: "‚è≥ Szacowany czas do zako≈Ñczenia"
            },
            "es-ES": {
                titulo: "Distribuci√≥n de art√≠culos",
                totalItens: "Cantidad total de art√≠culos:",
                placeholderTotal: "Ingrese valor!",
                adicionarConta: "+ Agregar cuenta",
                calcular: "Calcular",
                tempoPorItem: "Tiempo por art√≠culo (Cuenta {letra} - s) <small>[0 = desactivado]</small>:",
                nenhumaConta: "¬°No hay cuentas activas!",
                quantidadeZero: "Ingrese una cantidad total de art√≠culos mayor que cero.",
                tempoAprox: "‚è≥ Tiempo aproximado para terminar"
            },
            "tr-TR": {
                titulo: "√ñƒüe Daƒüƒ±lƒ±mƒ±",
                totalItens: "Toplam √∂ƒüe sayƒ±sƒ±:",
                placeholderTotal: "Deƒüer girin!",
                adicionarConta: "+ Hesap ekle",
                calcular: "Hesapla",
                tempoPorItem: "√ñƒüe ba≈üƒ±na s√ºre (Hesap {letra} - sn) <small>[0 = devre dƒ±≈üƒ±]</small>:",
                nenhumaConta: "Aktif hesap yok!",
                quantidadeZero: "Sƒ±fƒ±rdan b√ºy√ºk toplam √∂ƒüe sayƒ±sƒ± girin.",
                tempoAprox: "‚è≥ Bitirme tahmini s√ºresi"
            }
        };

        // Detecta idioma do navegador
        const idioma = navigator.language || "pt-BR";
        const t = textos[idioma] || textos["pt-BR"];

        // Seletor para testar idiomas manualmente
        const seletor = document.getElementById("seletor-idioma");
        seletor.value = idioma; // define o idioma inicial

        seletor.addEventListener("change", () => {
            const novoIdioma = seletor.value;
            const novoT = textos[novoIdioma] || textos["pt-BR"];
            Object.assign(t, novoT); // atualiza os textos
            aplicarTextos();
        });

        // Contas iniciais
        let contas = [{ tempo: 0 }, { tempo: 0 }];

        // Atualiza textos da interface
        function aplicarTextos() {
            document.getElementById("titulo").textContent = t.titulo;
            document.getElementById("label-total").textContent = t.totalItens;
            document.getElementById("total").placeholder = t.placeholderTotal;
            document.getElementById("btn-adicionar").textContent = t.adicionarConta;
            document.getElementById("btn-calcular").textContent = t.calcular;
            renderContas();
        }

        // Renderiza contas
        function renderContas() {
            const container = document.getElementById("contas");
            container.innerHTML = "";

            contas.forEach((c, i) => {
                const letra = String.fromCharCode(65 + i);
                const wrap = document.createElement("div");
                wrap.className = "conta";

                wrap.innerHTML = `
                    <div class="row">
                        <label for="tempo-${i}">${t.tempoPorItem.replace("{letra}", letra)}</label>
                        <input type="number" step="0.1" min="0" id="tempo-${i}" placeholder="0">
                    </div>
                    <button class="remove-btn" ${contas.length <= 2 ? 'style="display:none"' : ""} onclick="removerConta(${i})">X</button>
                `;

                container.appendChild(wrap);

                const input = wrap.querySelector("input");
                input.value = c.tempo || "";
                input.addEventListener("input", (e) => {
                    const v = parseFloat(e.target.value);
                    contas[i].tempo = isNaN(v) ? 0 : v;
                });
            });
        }

        function adicionarConta(tempo = 0) {
            contas.push({ tempo });
            renderContas();
        }

        function removerConta(idx) {
            if (contas.length <= 2) return;
            contas.splice(idx, 1);
            renderContas();
        }

        function calcular() {
            const total = parseFloat(document.getElementById("total").value) || 0;
            const ativos = contas
                .map((c, i) => ({ i, tempo: c.tempo }))
                .filter(c => c.tempo > 0);
            const resEl = document.getElementById("resultado");

            if (total <= 0) { resEl.innerHTML = t.quantidadeZero; return; }
            if (ativos.length === 0) { resEl.innerHTML = t.nenhumaConta; return; }

            const rates = ativos.map(c => 1 / c.tempo);
            const sumRates = rates.reduce((a, b) => a + b, 0);
            const quotas = rates.map(r => (r / sumRates) * total);
            let divisao = quotas.map(q => Math.floor(q));
            let resto = total - divisao.reduce((a, b) => a + b, 0);

            if (resto > 0) {
                const ordem = quotas.map((q, i) => ({ i, frac: q - Math.floor(q) }))
                                    .sort((a, b) => b.frac - a.frac);
                for (let k = 0; k < resto; k++) divisao[ordem[k % ordem.length].i]++;
            }

            const temposFinais = divisao.map((n, i) => n * ativos[i].tempo);
            const T = Math.max(...temposFinais);
            const textoTempo = formatDuration(T);

            let saida = "";
            ativos.forEach((cAtivo, i) => {
                const letra = String.fromCharCode(65 + i);
                saida += `Conta ${letra}: ${divisao[i]} itens<br>`;
            });
            saida += `<br>${t.tempoAprox}: ${textoTempo}.`;
            resEl.innerHTML = saida;
        }

        function formatDuration(sec) {
            sec = Math.round(sec);
            const h = Math.floor(sec / 3600);
            const m = Math.floor((sec % 3600) / 60);
            const s = sec % 60;
            if (h > 0) return `${h} h ${m} min ${s} s`;
            if (m > 0) return `${m} min ${s} s`;
            return `${s} s`;
        }

        function toggleModo() {
            document.body.classList.toggle("dark");
            localStorage.setItem("modo", document.body.classList.contains("dark") ? "dark" : "light");
        }

        window.addEventListener("DOMContentLoaded", () => {
            if (localStorage.getItem("modo") === "dark") document.body.classList.add("dark");
            aplicarTextos();
        });
    </script>
</body>
</html>
